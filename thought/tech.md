## 安卓壁纸产品功能服务

- 数据抓取
- 资源管理 cms
- 安卓壁纸 客户端 picasso rest  
- 官方网站
    - 投稿
    - 分享
    - 活动


## 安卓壁纸基础架构服务

- redis 集群
- mongodb 集群
- app 集群 多台机器,多app
- 异步任务服务 celery

## 监控服务

- api
- 服务进程
- mongodb
- redis
- os
- machine
- network
- 流量
- 日志
- 异步任务
- nginx

## 持续集成

- 自动化测试
- 自动化部署
- 自动化备份
- 自动化创建开发环境, 自动化创建测试环境
- 自动化扩容
- 自动化配置机器
- 自动化重启


## 知识分享, 代码重用, 故障回顾预防

- 团队内形成知识分享的氛围
- 代码质量可控,可重用  (开源  gitlab 协作 代码review 重构)
    - [quroa code review](http://note.youdao.com/share/?id=13347fad56ddb0a0481cac28651c411c&type=note)
- [线上故障事后分析与预防](http://note.youdao.com/share/web/file.html?id=13347fad56ddb0a0481cac28651c411c&type=note)

## 自动化之路

### 监控

理念

    能用程序干活的，坚决程序化、平台化；
    能用管理解决的问题，不用技术解决；
    同一个错误不能犯三次；
    每次故障，都是学习和提升的机会；
    每个人都要有产品化思维，做平台产品让开发走自助路线；
    小的，单一的功能，组合起来完成复杂的操作（任务分解）


需要一套监控系统, 监控主要api 和 服务,

**目的**

1.第一时间**发现**问题  
2.统计和分析服务的波动情况和日常健康状况(流量, 请求响应时间)  
3.记录和整理日常故障,以做备用  

**指标**

内存,cpu 等硬件资源指标

请求量,故障率等软性指标

### 基础服务

- 利用redis 封装缓存服务, 供所有服务调用
- mongodb 数据可视化(业务数据和元数据,日志数据), 自动启动,自动扩容,
- 异步任务队列服务


### 流程改善 进化

- 上线自动化测试,保证覆盖所有api
- 上线自动化部署
- 改善工作流(协作流程)
- 持续集成


# 概念

### 服务

可重用的最大单位的软件组织形式，一个服务一般是一个独立的系统。服务的主要目的为任何需要的产品提供可靠，
稳定的基础性功能。服务的主要特点是

- 独立开发，独立维护
- 功能可靠，性能稳定，任何变更都必须保持一定程度的向下兼容
- 保持功能单一，并可持续性改进

### 流程自动化

对任何依靠人的过程进行自动化处理，摒除任何由于由人参与而引入的不稳定因素。可自动化的过程有：发布，测试，备份，回滚等等

### 单一原则

不论是小如函数，类，API等最基础的代码组织单元，还是大如服务，基础工具库等服务性功能，都必须保持单一原则

### 持续性改进

对已有代码或服务持续优化，为保证可持续性优化，任何优化部分必须带有**自动化测试**以保证重构之后可迅速部署上线,投入到生产环境

### 指标

衡量软件的表现行为, 对任何服务,功能以及代码的评估必须要有相应的指标做支持 
